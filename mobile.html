<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOVII - –û–ø–µ—Ä–∞—Ç–æ—Ä –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</title>
    <link rel="icon" href="img/logo512.png" type="image/png">
    <link rel="apple-touch-icon" href="img/logo512.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        :root {
          /* –Ø—Ä–∫–∞—è —Ç–µ–º–∞ ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
          --bg-main: #E9E4D4;
          --text-primary: #4A5447;
          --accent-terra: #C97C5D;
          --accent-sage: #8F9E8B;
          --card-bg: #F0EDDE;
          --border-color: rgba(74, 84, 71, 0.1);
          --header-footer-bg: #E9E4D4;
          --modal-bg: white;
          --modal-text: #333;
          --modal-border: #eee;
        }
        [data-theme="dark"] {
          /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ */
          --bg-main: #121212;
          --text-primary: #EAE4D4;
          --accent-terra: #D4A03D;
          --accent-sage: #A8B894;
          --card-bg: #1e1e1e;
          --border-color: rgba(255, 255, 255, 0.1);
          --header-footer-bg: #1a1a1a;
          --modal-bg: #2a2a2a;
          --modal-text: #f0f0f0;
          --modal-border: rgba(255, 255, 255, 0.1);
        }
        body {
          font-family: 'Inter', sans-serif;
          background-color: var(--bg-main);
          color: var(--text-primary);
          width: 375px;
          min-height: 100vh;
          margin: 0 auto;
          position: relative;
          overflow-x: hidden;
        }
        .screen {
          display: none;
          padding: 20px;
          height: calc(100vh - 120px); /* Account for header and footer */
          overflow-y: auto;
        }
        .screen.active {
          display: block;
        }
        /* Header styles */
        .header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 6px 12px;
          background-color: var(--header-footer-bg);
          position: sticky;
          top: 0;
          z-index: 100;
          border-bottom: 1px solid var(--border-color);
        }
        .header.hidden {
          display: none;
        }
        .logo-container {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        .logo-text {
          font-size: 20px;
          font-weight: 700;
          color: var(--text-primary); /* ‚Üê –≤–æ—Ç —ç—Ç–æ –≤–∞–∂–Ω–æ */
        }
        .notification-btn {
          background: none;
          border: none;
          cursor: pointer;
          padding: 5px;
        }
        .notification-icon {
          width: 28px;
          height: 28px;
          fill: var(--text-primary);
        }
        .app-logo {
          height: 48px;
        }
        .hero-logo {
          height: 280px;
          margin: 0 auto 30px;
          display: block;
        }
        .profile-btn {
          background: none;
          border: none;
          cursor: pointer;
          padding: 5px;
        }
        .profile-btn.hidden {
          display: none;
        }
        .profile-icon {
          width: 28px;
          height: 28px;
          fill: var(--text-primary);
        }
        /* Footer navigation */
        .footer-nav {
          display: none; /* Initially hidden until authenticated */
          justify-content: space-around;
          align-items: center;
          padding: 12px 10px;
          background-color: var(--header-footer-bg);
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          width: 375px;
          margin: 0 auto;
          border-top: 1px solid var(--border-color);
        }
        .footer-nav.show {
          display: flex;
        }
        .nav-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 5px;
          cursor: pointer;
        }
        .nav-icon {
          width: 24px;
          height: 24px;
          fill: var(--text-primary);
        }
        .nav-label {
          font-size: 10px;
          margin-top: 2px;
          color: var(--text-primary);
        }
        .nav-item.center {
          position: relative;
        }
        .nav-item.center .nav-icon-wrapper {
          background-color: var(--accent-terra);
          border-radius: 50%;
          width: 50px;
          height: 50px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-top: -20px;
          border: 3px solid var(--bg-main);
        }
        .nav-item.center .nav-icon {
          width: 28px;
          height: 28px;
        }
        /* Screen 1 - Main */
        .main-screen {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          height: 100%;
        }
        .main-logo {
          width: 240px;
          height: 240px;
          margin-bottom: 16px;
        }
        .catch-colors-btn {
          background-color: var(--accent-terra);
          color: white;
          border: none;
          padding: 15px 30px;
          border-radius: 12px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          box-shadow: 0 4px 8px rgba(201, 124, 93, 0.3);
          width: 80%;
        }
        /* Screen 2 - Authorization */
        .auth-screen {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }
        .input-group {
          margin-bottom: 15px;
        }
        .input-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 500;
          font-size: 14px;
        }
        .input-group input {
          width: 100%;
          padding: 14px;
          border: 1px solid var(--accent-sage);
          border-radius: 8px;
          font-size: 16px;
          background-color: white;
        }
        .login-btn {
          background-color: var(--accent-terra);
          color: white;
          border: none;
          padding: 16px;
          border-radius: 8px;
          font-size: 18px;
          font-weight: 600;
          cursor: pointer;
          margin-top: 10px;
          box-shadow: 0 4px 8px rgba(201, 124, 93, 0.3);
        }
        /* Screen 3 - SMS Code */
        .sms-screen {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 25px;
        }
        .sms-title {
          font-size: 20px;
          font-weight: 600;
          text-align: center;
          margin-top: 20px;
        }
        .code-input {
          width: 100%;
          max-width: 200px;
          padding: 14px;
          text-align: center;
          font-size: 24px;
          border: 1px solid var(--accent-sage);
          border-radius: 8px;
          letter-spacing: 8px;
        }
        .confirm-btn {
          background-color: var(--accent-terra);
          color: white;
          border: none;
          padding: 16px 40px;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          box-shadow: 0 4px 8px rgba(201, 124, 93, 0.3);
        }
        /* Categories screen styles */
        .categories-screen {
          padding-top: 20px;
        }
        .categories-title {
          font-size: 24px;
          font-weight: 600;
          margin-bottom: 20px;
          text-align: center;
          color: var(--text-primary);
        }
        .categories-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
        }
        .category-card {
          background-color: var(--card-bg);
          border-radius: 16px;
          padding: 16px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          box-shadow: 0 4px 12px rgba(79, 107, 92, 0.08);
          cursor: pointer;
          transition: all 0.3s ease;
        }
        .category-card:hover, .category-card:focus {
          transform: translateY(-3px);
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        /* Stores screen styles */
        .stores-screen {
          padding-top: 20px;
        }
        .stores-title {
          font-size: 28px;
          font-weight: 700;
          margin-bottom: 25px;
          text-align: center;
          color: var(--text-primary);
          font-family: 'Inter', sans-serif;
        }
        .stores-grid {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }
        .store-card {
          background-color: var(--card-bg);
          border-radius: 16px;
          padding: 20px;
          display: flex;
          flex-direction: column;
          box-shadow: 0 4px 12px rgba(79, 107, 92, 0.08);
          transition: all 0.3s ease;
        }
        .store-card:hover, .store-card:focus {
          transform: translateY(-5px);
          box-shadow: 0 8px 16px rgba(79, 107, 92, 0.15);
        }
        .store-header {
          display: flex;
          align-items: center;
          gap: 15px;
          margin-bottom: 15px;
        }
        .category-icon-circle {
          width: 48px;
          height: 48px;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          background-color: rgba(143, 158, 139, 0.1); /* Light sage background */
        }
        .store-icon {
          width: 48px;
          height: 48px;
          fill: var(--accent-sage);
        }
        .store-info {
          flex: 1;
        }
        .store-name {
          font-size: 18px;
          font-weight: 600;
          color: var(--text-primary);
          margin-bottom: 5px;
        }
        .store-category {
          font-size: 14px;
          color: var(--accent-sage);
          font-weight: 500;
        }
        .lovii-badge {
          display: flex;
          align-items: center;
          gap: 8px;
          background-color: var(--accent-terra);
          color: white;
          padding: 8px 12px;
          border-radius: 20px;
          font-size: 14px;
          font-weight: 500;
          margin-bottom: 15px;
          align-self: flex-start;
        }
        .lovii-badge svg {
          width: 14px;
          height: 14px;
        }
        .open-btn {
          background-color: var(--accent-terra);
          color: white;
          border: none;
          padding: 14px;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          transition: background-color 0.3s ease;
        }
        .open-btn:hover {
          background-color: #b56c52;
        }
        .category-icon {
          width: 40px;
          height: 40px;
          margin-bottom: 10px;
        }
        .category-name {
          font-size: 14px;
          font-weight: 500;
          color: var(--text-primary);
          font-family: 'Inter', sans-serif;
        }
        .categories-section {
          margin-bottom: 20px;
        }
        .categories-row {
          display: flex;
          gap: 10px;
          margin-bottom: 10px;
        }
        .categories-row.two-categories {
          width: 100%;
        }
        .categories-row.three-categories {
          width: 100%;
        }
        .category-card.two-cols {
          flex: 1 1 calc(50% - 5px);
        }
        .category-card.three-cols {
          flex: 1 1 calc(33.333% - 6.67px);
        }
        .category-icon-svg {
          width: 40px;
          height: 40px;
          margin-bottom: 10px;
        }
        
        .ad-banner {
          width: 100%;
          height: 200px;
          background-color: var(--accent-terra);
          border-radius: 16px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 20px;
          box-shadow: 0 4px 12px rgba(79, 107, 92, 0.08);
        }
        .ad-content {
          text-align: center;
          color: white;
        }
        .ad-content h3 {
          font-size: 20px;
          margin-bottom: 10px;
        }
        .ad-content p {
          font-size: 16px;
        }
        .banner-carousel {
          width: 100%;
          height: 200px;
          overflow: hidden;
          margin-bottom: 20px;
          border-radius: 16px;
          box-shadow: 0 4px 12px rgba(79, 107, 92, 0.08);
          position: relative;
        }
        .banner-track {
          display: flex;
          height: 200px;
          transition: transform 0.5s ease-in-out;
        }
        .banner-card {
          min-width: 100%;
          height: 200px;
        }
        .banner-card img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        @keyframes fadeInSlideUp {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .modal-overlay {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0,0,0,0.5);
          z-index: 1000;
        }
        .modal-content {
          position: fixed;
          bottom: 0;
          left: 0;
          width: 100%;
          background-color: var(--modal-bg);
          border-radius: 16px 16px 0 0;
          padding: 20px;
          box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
          z-index: 1001;
        }
        .modal-item {
          padding: 15px 0;
          border-bottom: 1px solid var(--modal-border);
          font-size: 16px;
          color: var(--modal-text);
          cursor: pointer;
        }
        .modal-item:last-child {
          border-bottom: none;
        }
        .logout-item {
          color: var(--accent-terra);
          font-weight: 600;
        }
        </style>
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="logo-container" id="logoContainer">
            <img src="img/logo512.png" alt="LOVII" class="app-logo">
            <span class="logo-text">LOVII</span>
        </div>
        <button class="notification-btn" id="notificationBtn">
            <svg id="bellIconWithDot" class="notification-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: block;">
                <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="18" cy="6" r="2" fill="#FF0000"/>
            </svg>
            <svg id="bellIconWithoutDot" class="notification-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.7295 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </header>

    <!-- Screen 1: Main -->
    <div id="mainScreen" class="screen active">
        <div class="main-screen">
            <img src="img/logo512.png" alt="LOVII" class="hero-logo">
            <button class="catch-colors-btn" id="catchColorsBtn">–õ–æ–≤–∏</button>
        </div>
    </div>

    <!-- Screen 2: Authorization -->
    <div id="authScreen" class="screen">
        <div class="auth-screen">
            <div class="input-group">
                <label for="phoneInput">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                <input type="tel" id="phoneInput" placeholder="+7 (___) ___-__-__">
            </div>
            <div class="input-group">
                <label for="promoInput">–ü—Ä–æ–º–æ–∫–æ–¥ (4 —Å–∏–º–≤–æ–ª–∞)</label>
                <input type="text" id="promoInput" placeholder="ABCD" maxlength="4">
            </div>
            <button class="login-btn" id="loginBtn">–í–æ–π—Ç–∏</button>
        </div>
    </div>

    <!-- Screen 3: SMS Code -->
    <div id="smsScreen" class="screen">
        <div class="sms-screen">
            <h2 class="sms-title">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS</h2>
            <input type="text" class="code-input" id="codeInput" placeholder="____" maxlength="4">
            <button class="confirm-btn" id="confirmBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>
    </div>

    <!-- Screen 4: Stores (Main screen after auth) -->
    <div id="storesScreen" class="screen">
        <div class="stores-screen">
            <div class="categories-section">
                <div class="categories-row two-categories" id="twoCategoriesRow">
                    <!-- Two category cards will be populated by JavaScript -->
                </div>
                <div class="categories-row three-categories" id="threeCategoriesRow">
                    <!-- Three category cards will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Banner Carousel -->
            <div class="banner-carousel">
                <div class="banner-track">
                    <div class="banner-card"><img src="img/banner1.png" alt="–ë–∞–Ω–Ω–µ—Ä 1"></div>
                    <div class="banner-card"><img src="img/banner2.png" alt="–ë–∞–Ω–Ω–µ—Ä 2"></div>
                    <div class="banner-card"><img src="img/banner3.png" alt="–ë–∞–Ω–Ω–µ—Ä 3"></div>
                    <div class="banner-card"><img src="img/banner4.png" alt="–ë–∞–Ω–Ω–µ—Ä 4"></div>
                    <div class="banner-card"><img src="img/banner5.png" alt="–ë–∞–Ω–Ω–µ—Ä 5"></div>
                    <div class="banner-card"><img src="img/banner6.png" alt="–ë–∞–Ω–Ω–µ—Ä 6"></div>
                    <div class="banner-card"><img src="img/banner8.png" alt="–ë–∞–Ω–Ω–µ—Ä 8"></div>
                </div>
            </div>
            
            <!-- Stores Section -->
            <div class="stores-section">
                <h2 class="stores-title">–¢–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ —Ä—è–¥–æ–º</h2>
                <div class="stores-grid" id="storesGrid">
                    <!-- Store cards will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 5: Categories -->
    <div id="categoriesScreen" class="screen">
        <div class="categories-screen">
            <h2 class="categories-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≤–µ–¥–µ–Ω–∏–π</h2>
            <!-- //–ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
            <input type="text" id="categorySearch" placeholder="–ù–∞–π—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é..." style="width:100%; padding:10px; margin-bottom:15px; border:1px solid var(--accent-sage); border-radius:8px;">
        
            <div class="categories-grid" id="categoriesGrid">
                <!-- Categories will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer Navigation -->
    <footer class="footer-nav" id="footerNav">
        <div class="nav-item" data-target="mainScreen">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" data-target="categoriesScreen">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="nav-label">–ü–æ–∏—Å–∫</span>
        </div>
        <div class="nav-item center" data-target="categoriesScreen">
            <div class="nav-icon-wrapper">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 5V19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
        </div>
        <div class="nav-item" data-target="giftsScreen">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 12V22H4V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 7H2V12H22V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 7V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 7L12 2L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="nav-label">–ü–æ–¥–∞—Ä–∫–∏</span>
        </div>
        <div class="nav-item" id="profileNavItem">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/>
                <path d="M20 20C20 17.5 18 15.5 15.5 15.5H8.5C6 15.5 4 17.5 4 20" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </footer>

    <!-- Gifts Screen -->
    <div id="giftsScreen" class="screen">
        <div class="categories-screen">
            <h2 class="categories-title">–û–Ω–ª–∞–π–Ω-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h2>
            <div class="categories-grid" id="giftsGrid">
                <div class="category-card">
                    <h3>–ë–∞–Ω–∫–∏</h3>
                    <p>–°–±–µ—Ä–±–∞–Ω–∫ ‚Äî 5% –∫—ç—à–±—ç–∫</p>
                </div>
                <div class="category-card">
                    <h3>–û–ø–µ—Ä–∞—Ç–æ—Ä—ã</h3>
                    <p>–ú–µ–≥–∞—Ñ–æ–Ω ‚Äî –æ–±–º–µ–Ω –ì–ë –Ω–∞ –±–∞–ª–ª—ã</p>
                </div>
                <div class="category-card">
                    <h3>–ö–æ—Å–º–µ—Ç–∏–∫–∞</h3>
                    <p>–õ'–≠—Ç—É–∞–ª—å ‚Äî –±–æ–Ω—É—Å—ã –∑–∞ –ø–æ–∫—É–ø–∫–∏</p>
                </div>
                <div class="category-card">
                    <h3>–°—Ç—Ä–∞—Ö–æ–≤–∫–∏</h3>
                    <p>–ò–ù–ì–û–°–°–¢–†–ê–• ‚Äî –±–∞–ª–ª—ã –∑–∞ –ø–æ–ª–∏—Å</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal-overlay" style="display: none;">
      <div class="modal-content">
        <div class="modal-close" style="text-align: right; margin-bottom: 10px; cursor: pointer; font-size: 24px;">√ó</div>
        <div class="modal-item">–ü—Ä–æ—Ñ–∏–ª—å</div>
        <div class="modal-item">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</div>
        <div class="modal-item">–ë–∞–ª–∞–Ω—Å</div>
        <div class="modal-item">QR –∫–æ–¥</div>
        <div class="modal-item">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
        <div class="modal-item">–ö–æ—Ä–∑–∏–Ω–∞</div>
        <div class="modal-item">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
        <div class="modal-item">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</div>
        <div class="modal-item" id="themeToggleItem">üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</div>
        <div class="modal-item logout-item" id="logoutItem">–í—ã–π—Ç–∏</div>
      </div>
    </div>

    <script>
// === –î–ê–ù–ù–´–ï ===
const categories = [
  "–ú–∞–≥–∞–∑–∏–Ω —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤",
  "–ü–µ–∫–∞—Ä–Ω—è",
  "–ö–æ—Ñ–µ–π–Ω—è",
  "–°—ã—Ä–æ–≤–∞—Ä–Ω—è",
  "–ú—è—Å–Ω–∞—è –ª–∞–≤–∫–∞",
  "–ú–∞–≥–∞–∑–∏–Ω —Ä—ã–±—ã –∏ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤",
  "–í–µ–≥–∞–Ω—Å–∫–∏–π –º–∞–≥–∞–∑–∏–Ω",
  "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã",
  "–í–∏–Ω–æ—Ç–µ–∫–∞",
  "–ö—Ä–∞—Ñ—Ç-–ø–∏–≤–æ",
  "–ë–∞—Ä–±–µ—Ä—à–æ–ø",
  "–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∞—è",
  "–°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã",
  "–ú–∞–Ω–∏–∫—é—Ä",
  "–ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω",
  "–°–ø–∞-—Å–∞–ª–æ–Ω",
  "–ô–æ–≥–∞-—Å—Ç—É–¥–∏—è",
  "–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä",
  "–ê—Ç–µ–ª—å–µ –ø–æ—à–∏–≤ –æ–¥–µ–∂–¥—ã",
  "–†–µ–º–æ–Ω—Ç –æ–¥–µ–∂–¥—ã",
  "–•–∏–º—á–∏—Å—Ç–∫–∞",
  "–ö–ª–∏–Ω–∏–Ω–≥",
  "–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä",
  "–†–µ–º–æ–Ω—Ç —Ç–µ—Ö–Ω–∏–∫–∏",
  "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫",
  "–≠–ª–µ–∫—Ç—Ä–∏–∫",
  "IT-—Ä–µ–º–æ–Ω—Ç",
  "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–π—Ç–æ–≤",
  "–ê–≤—Ç–æ–º–æ–π–∫–∞",
  "–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂",
  "–î–µ—Ç–µ–π–ª–∏–Ω–≥ –∞–≤—Ç–æ",
  "Handmade-–±–∏–∂—É—Ç–µ—Ä–∏—è",
  "–§–ª–æ—Ä–∏—Å—Ç–∏–∫–∞",
  "–§–æ—Ç–æ–≥—Ä–∞—Ñ",
  "–ß–∞—Å—Ç–Ω—ã–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä",
  "–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤",
  "–î–µ—Ç—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä",
  "–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω",
  "–ì—Ä—É–º–∏–Ω–≥ –∂–∏–≤–æ—Ç–Ω—ã—Ö",
  "–°—Ç–æ–ª–æ–≤–∞—è –¥–æ–º–∞—à–Ω–µ–π –∫—É—Ö–Ω–∏",
  "–ü–∏—Ü—Ü–µ—Ä–∏—è",
  "–°—É—à–∏-–±–∞—Ä",
  "–ë—É—Ä–≥–µ—Ä–Ω–∞—è",
  "–ö–µ–π—Ç–µ—Ä–∏–Ω–≥",
  "–Æ–≤–µ–ª–∏—Ä–Ω–∞—è –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è"
];

const stores = [
  {
    name: '–†—ã–±–Ω—ã–π –ø—Ä–∏–ª–∞–≤–æ–∫ "–£ –ø—Ä–∏—á–∞–ª–∞"',
    category: '–°–≤–µ–∂–∞—è —Ä—ã–±–∞',
    icon: '<svg class="store-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 12C18 12 15 15 12 15C9 15 6 12 6 12C6 12 9 9 12 9C15 9 18 12 18 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 15V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    points: 100
  },
  {
    name: '–ü–∏—Ü—Ü–µ—Ä–∏—è "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞"',
    category: '–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è',
    icon: '<svg class="store-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17 22 20 19 20 15C20 12.5 18.5 10 12 3C5.5 10 4 12.5 4 15C4 19 7 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 14C8.5 13 9.5 13 10 14C10.5 15 11.5 15 12 14C12.5 13 13.5 13 14 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',
    points: 150
  },
  {
    name: '–®–∞–≤–µ—Ä–º–∞ –Ω–∞ —É–≥–ª—É',
    category: '–£–ª–∏—á–Ω–∞—è –µ–¥–∞',
    icon: '<svg class="store-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 11H20C20 16 17 20 12 20C7 20 4 16 4 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 20V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 22H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    points: 80
  },
  {
    name: '–Ø–ø–æ–Ω—Å–∫–∞—è –ª–∞–≤–∫–∞ "–•–∞—Ä—É—à–∏"',
    category: '–Ø–ø–æ–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è',
    icon: '<svg class="store-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2"/><path d="M12 8V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    points: 200
  },
  {
    name: '–ë—É–ª–æ—á–Ω–∞—è "–†–∂–∞–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ"',
    category: '–ü–µ–∫–∞—Ä–Ω–∏ –∏ –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∏–µ',
    icon: '<svg class="store-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 15C2 15 4 13 8 13C12 13 16 17 22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M10 13V9C10 7.34315 11.3431 6 13 6C14.6569 6 16 7.34315 16 9V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',
    points: 120
  },
  {
    name: '–ö–æ—Ñ–µ–π–Ω—è "–£—é—Ç–Ω—ã–π —É–≥–æ–ª"',
    category: '–ö–æ—Ñ–µ–π–Ω–∏',
    icon: '<svg class="store-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17 12C17 14.2091 15.2091 16 13 16C10.7909 16 9 14.2091 9 12C9 9.79086 10.7909 8 13 8C15.2091 8 17 9.79086 17 12Z" stroke="currentColor" stroke-width="2"/><path d="M18 22C18 20.8954 17.1046 20 16 20H10C8.89543 20 8 20.8954 8 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M20 16V12C20 8.68629 17.3137 6 14 6H10C6.68629 6 4 8.68629 4 12V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    points: 110
  }
];

const categoryIcons = {
  "–ú–∞–≥–∞–∑–∏–Ω —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 8L20 16H28L24 8Z" stroke="#8F9E8B" stroke-width="2"/><path d="M12 20L16 28H32L36 20" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="36" r="4" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ü–µ–∫–∞—Ä–Ω—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 28C14 32 20 34 24 34C28 34 34 32 38 28C38 24 34 20 24 20C14 20 10 24 10 28Z" stroke="#8F9E8B" stroke-width="2"/><path d="M16 26L20 22" stroke="#8F9E8B" stroke-width="2"/><path d="M32 26L28 22" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ö–æ—Ñ–µ–π–Ω—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 30H32C34 30 36 32 36 34V38H12V34C12 32 14 30 16 30Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20C20 16 22 14 24 14C26 14 28 16 28 20" stroke="#8F9E8B" stroke-width="2"/><path d="M22 24C22 26 24 28 26 26" stroke="#8F9E8B" stroke-width="2"/><path d="M20 34V36" stroke="#8F9E8B" stroke-width="2"/><path d="M24 34V36" stroke="#8F9E8B" stroke-width="2"/><path d="M28 34V36" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–°—ã—Ä–æ–≤–∞—Ä–Ω—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24L16 16L24 12L32 16L36 24L32 32L24 36L16 32L12 24Z" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="4" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ú—è—Å–Ω–∞—è –ª–∞–≤–∫–∞": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12C20 12 16 16 16 20C16 24 20 28 24 28C28 28 32 24 32 20C32 16 28 12 24 12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M24 28V36" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32H28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ú–∞–≥–∞–∑–∏–Ω —Ä—ã–±—ã –∏ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 24C16 24 20 14 28 18C36 22 36 26 28 30C20 34 16 24 16 24Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 22C20 24 22 26 24 26C26 26 28 24 28 22C28 20 26 18 24 18C22 18 20 20 20 22Z" stroke="#8F9E8B" stroke-width="2"/><path d="M26 26L28 30" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–í–µ–≥–∞–Ω—Å–∫–∏–π –º–∞–≥–∞–∑–∏–Ω": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12L28 20L24 24L20 20L24 12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M24 24L24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M20 28L28 28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="16" stroke="#8F9E8B" stroke-width="2"/><path d="M24 12L28 20L24 24L20 20L24 12Z" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–í–∏–Ω–æ—Ç–µ–∫–∞": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 12H32V36H16V12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 16H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20H28" stroke="#8F9E8B" stroke-width="2"/><path d="M24 8C26 10 26 14 24 16C22 14 22 10 24 8Z" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ö—Ä–∞—Ñ—Ç-–ø–∏–≤–æ": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 12H32V36H16V12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 16H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20H28" stroke="#8F9E8B" stroke-width="2"/><ellipse cx="24" cy="30" rx="4" ry="2" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ë–∞—Ä–±–µ—Ä—à–æ–ø": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 16L28 24M28 16L20 24" stroke="#8F9E8B" stroke-width="2"/><path d="M24 24L24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32L28 32" stroke="#8F9E8B" stroke-width="2"/><path d="M18 36L30 36" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∞—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="16" r="8" stroke="#8F9E8B" stroke-width="2"/><path d="M16 28C16 28 20 36 24 36C28 36 32 28 32 28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 24L28 24" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 20C24 20 28 16 30 18C32 20 32 24 30 26C28 28 24 28 24 28C24 28 20 28 18 26C16 24 16 20 18 18C20 16 24 20 24 20Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32L28 32" stroke="#8F9E8B" stroke-width="2"/><path d="M24 28L24 32" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ú–∞–Ω–∏–∫—é—Ä": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 16C24 16 28 12 30 14C32 16 32 20 30 22C28 24 24 24 24 24C24 24 20 24 18 22C16 20 16 16 18 14C20 12 24 16 24 16Z" stroke="#8F9E8B" stroke-width="2"/><path d="M22 28L26 28" stroke="#8F9E8B" stroke-width="2"/><path d="M24 24L24 28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 24L24 20L28 24" stroke="#8F9E8B" stroke-width="2"/><path d="M24 20L24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M18 32C18 32 20 36 24 36C28 36 30 32 30 32" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–°–ø–∞-—Å–∞–ª–æ–Ω": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 20C24 20 28 16 30 18C32 20 32 24 30 26C28 28 24 28 24 28C24 28 20 28 18 26C16 24 16 20 18 18C20 16 24 20 24 20Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32L28 32" stroke="#8F9E8B" stroke-width="2"/><path d="M24 28L24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M24 36L24 38" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ô–æ–≥–∞-—Å—Ç—É–¥–∏—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="20" r="4" stroke="#8F9E8B" stroke-width="2"/><path d="M24 24L24 28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 36L24 28L28 36" stroke="#8F9E8B" stroke-width="2"/><path d="M18 30L20 28" stroke="#8F9E8B" stroke-width="2"/><path d="M30 30L28 28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="20" r="4" stroke="#8F9E8B" stroke-width="2"/><path d="M24 24L24 28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 36L24 28L28 36" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ê—Ç–µ–ª—å–µ –ø–æ—à–∏–≤ –æ–¥–µ–∂–¥—ã": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12L26 16L24 20L22 16L24 12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M24 20L24 28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 28L28 28" stroke="#8F9E8B" stroke-width="2"/><path d="M22 34C22 34 24 38 26 34" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–†–µ–º–æ–Ω—Ç –æ–¥–µ–∂–¥—ã": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 20L28 28M28 20L20 28" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="12" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–•–∏–º—á–∏—Å—Ç–∫–∞": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 12H36V36H12V12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M16 16L32 32" stroke="#8F9E8B" stroke-width="2"/><path d="M32 16L16 32" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ö–ª–∏–Ω–∏–Ω–≥": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12L24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32L28 32" stroke="#8F9E8B" stroke-width="2"/><path d="M22 28L26 28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 36L22 34" stroke="#8F9E8B" stroke-width="2"/><path d="M26 34L28 36" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12L24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32L28 32" stroke="#8F9E8B" stroke-width="2"/><path d="M22 28L26 28" stroke="#8F9E8B" stroke-width="2"/><path d="M24 36L24 40" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–†–µ–º–æ–Ω—Ç —Ç–µ—Ö–Ω–∏–∫–∏": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="12" y="12" width="24" height="24" rx="2" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20L28 28M28 20L20 28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24H36" stroke="#8F9E8B" stroke-width="2"/><path d="M24 12V36" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="8" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–≠–ª–µ–∫—Ç—Ä–∏–∫": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24L20 16L28 32L36 24" stroke="#8F9E8B" stroke-width="2" stroke-linecap="round"/><circle cx="24" cy="24" r="12" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "IT-—Ä–µ–º–æ–Ω—Ç": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="10" y="10" width="28" height="28" rx="2" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20L28 28M28 20L20 28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–π—Ç–æ–≤": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="12" y="12" width="24" height="24" rx="2" stroke="#8F9E8B" stroke-width="2"/><path d="M20 16H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 24H28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ê–≤—Ç–æ–º–æ–π–∫–∞": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24H36" stroke="#8F9E8B" stroke-width="2"/><path d="M24 12V36" stroke="#8F9E8B" stroke-width="2"/><path d="M16 16L32 32" stroke="#8F9E8B" stroke-width="2"/><path d="M32 16L16 32" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="16" stroke="#8F9E8B" stroke-width="2"/><path d="M24 8V16" stroke="#8F9E8B" stroke-width="2"/><path d="M24 32V40" stroke="#8F9E8B" stroke-width="2"/><path d="M8 24H16" stroke="#8F9E8B" stroke-width="2"/><path d="M32 24H40" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–î–µ—Ç–µ–π–ª–∏–Ω–≥ –∞–≤—Ç–æ": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24H36" stroke="#8F9E8B" stroke-width="2"/><path d="M24 12V36" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="8" stroke="#8F9E8B" stroke-width="2"/><path d="M16 16L32 32" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "Handmade-–±–∏–∂—É—Ç–µ—Ä–∏—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="12" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="4" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="1" fill="#8F9E8B"/></svg>',
  "–§–ª–æ—Ä–∏—Å—Ç–∏–∫–∞": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="20" r="4" stroke="#8F9E8B" stroke-width="2"/><circle cx="18" cy="26" r="3" stroke="#8F9E8B" stroke-width="2"/><circle cx="30" cy="26" r="3" stroke="#8F9E8B" stroke-width="2"/><path d="M24 24L24 30" stroke="#8F9E8B" stroke-width="2"/><path d="M20 30C20 30 24 34 28 30" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–§–æ—Ç–æ–≥—Ä–∞—Ñ": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="12" y="20" width="24" height="12" rx="2" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="26" r="4" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="26" r="1" fill="#8F9E8B"/><path d="M32 20L36 16" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ß–∞—Å—Ç–Ω—ã–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 12H32V36H16V12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 16H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 20H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 24H28" stroke="#8F9E8B" stroke-width="2"/><path d="M24 8C26 10 26 14 24 16C22 14 22 10 24 8Z" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12C28 12 32 16 32 20C32 24 28 28 24 28C20 28 16 24 16 20C16 16 20 12 24 12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M24 8V12" stroke="#8F9E8B" stroke-width="2"/><path d="M24 28V32" stroke="#8F9E8B" stroke-width="2"/><path d="M20 24H28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–î–µ—Ç—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="16" r="6" stroke="#8F9E8B" stroke-width="2"/><path d="M20 28C20 28 24 36 28 28" stroke="#8F9E8B" stroke-width="2"/><path d="M16 24L32 24" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 24C24 24 30 18 32 22C34 26 34 30 32 34C30 38 24 36 24 36C24 36 18 38 16 34C14 30 14 26 16 22C18 18 24 24 24 24Z" stroke="#8F9E8B" stroke-width="2"/><path d="M22 30C22 30 24 34 26 30" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ì—Ä—É–º–∏–Ω–≥ –∂–∏–≤–æ—Ç–Ω—ã—Ö": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 24C24 24 30 18 32 22C34 26 34 30 32 34C30 38 24 36 24 36C24 36 18 38 16 34C14 30 14 26 16 22C18 18 24 24 24 24Z" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32C20 32 22 36 24 32" stroke="#8F9E8B" stroke-width="2"/><path d="M24 32C24 32 26 36 28 32" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–°—Ç–æ–ª–æ–≤–∞—è –¥–æ–º–∞—à–Ω–µ–π –∫—É—Ö–Ω–∏": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24H36V36H12V24Z" stroke="#8F9E8B" stroke-width="2"/><path d="M16 20V16C16 14.3431 17.3431 13 19 13H29C30.6569 13 32 14.3431 32 16V20" stroke="#8F9E8B" stroke-width="2"/><path d="M20 28H28" stroke="#8F9E8B" stroke-width="2"/><path d="M20 32H28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ü–∏—Ü—Ü–µ—Ä–∏—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="16" stroke="#8F9E8B" stroke-width="2"/><path d="M24 12L28 20L24 24L20 20L24 12Z" stroke="#8F9E8B" stroke-width="2"/><path d="M24 8L26 12" stroke="#8F9E8B" stroke-width="2"/><path d="M20 16L22 18" stroke="#8F9E8B" stroke-width="2"/><path d="M28 16L26 18" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–°—É—à–∏-–±–∞—Ä": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="16" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="8" stroke="#8F9E8B" stroke-width="2"/><path d="M20 24L28 24" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ë—É—Ä–≥–µ—Ä–Ω–∞—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24C12 24 16 14 24 14C32 14 36 24 36 24C36 24 34 34 24 34C14 34 12 24 12 24Z" stroke="#8F9E8B" stroke-width="2"/><path d="M18 22L30 22" stroke="#8F9E8B" stroke-width="2"/><path d="M20 26L28 26" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–ö–µ–π—Ç–µ—Ä–∏–Ω–≥": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24H36V36H12V24Z" stroke="#8F9E8B" stroke-width="2"/><path d="M16 20V16C16 14.3431 17.3431 13 19 13H29C30.6569 13 32 14.3431 32 16V20" stroke="#8F9E8B" stroke-width="2"/><path d="M20 28H28" stroke="#8F9E8B" stroke-width="2"/></svg>',
  "–Æ–≤–µ–ª–∏—Ä–Ω–∞—è –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è": '<svg class="category-icon-svg" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="12" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="4" stroke="#8F9E8B" stroke-width="2"/><circle cx="24" cy="24" r="1" fill="#8F9E8B"/></svg>'
};

// === DOM ===
const mainScreen = document.getElementById('mainScreen');
const authScreen = document.getElementById('authScreen');
const smsScreen = document.getElementById('smsScreen');
const storesScreen = document.getElementById('storesScreen');
const categoriesScreen = document.getElementById('categoriesScreen');
const giftsScreen = document.getElementById('giftsScreen');
const catchColorsBtn = document.getElementById('catchColorsBtn');
const loginBtn = document.getElementById('loginBtn');
const confirmBtn = document.getElementById('confirmBtn');
const profileNavItem = document.getElementById('profileNavItem');
const footerNav = document.getElementById('footerNav');
const categoriesGrid = document.getElementById('categoriesGrid');
const storesGrid = document.getElementById('storesGrid');
const profileModal = document.getElementById('profileModal');
const modalContent = profileModal.querySelector('.modal-content');
const themeToggleItem = document.getElementById('themeToggleItem');
const logoutItem = document.getElementById('logoutItem');

// === –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–ê–¢–ï–ì–û–†–ò–ô ===
function generateCategoriesGrid() {
  categoriesGrid.innerHTML = '';
  categories.forEach(category => {
    const card = document.createElement('div');
    card.className = 'category-card';
    card.innerHTML = `
      <div class="category-icon">${categoryIcons[category] || 'üè∑Ô∏è'}</div>
      <div class="category-name">${category}</div>
    `;
    card.addEventListener('click', () => console.log(`Category clicked: ${category}`));
    categoriesGrid.appendChild(card);
  });
}

// === –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–ê–¢–ï–ì–û–†–ò–ô –ù–ê –ì–õ–ê–í–ù–û–ô ===
function generateMainScreenCategories() {
  const shuffled = [...categories].sort(() => 0.5 - Math.random());
  const selected = shuffled.slice(0, 5);

  const twoRow = document.getElementById('twoCategoriesRow');
  twoRow.innerHTML = '';
  selected.slice(0, 2).forEach(cat => {
    const card = document.createElement('div');
    card.className = 'category-card two-cols';
    card.innerHTML = `
      <div class="category-icon-svg">${categoryIcons[cat] || 'üè∑Ô∏è'}</div>
      <div class="category-name">${cat}</div>
    `;
    card.addEventListener('click', () => window.location.hash = 'categories');
    twoRow.appendChild(card);
  });

  const threeRow = document.getElementById('threeCategoriesRow');
  threeRow.innerHTML = '';
  selected.slice(2, 5).forEach(cat => {
    const card = document.createElement('div');
    card.className = 'category-card three-cols';
    card.innerHTML = `
      <div class="category-icon-svg">${categoryIcons[cat] || 'üè∑Ô∏è'}</div>
      <div class="category-name">${cat}</div>
    `;
    card.addEventListener('click', () => window.location.hash = 'categories');
    threeRow.appendChild(card);
  });
}

// === –ì–ï–ù–ï–†–ê–¶–ò–Ø –¢–û–ß–ï–ö ===
function generateStoresGrid() {
  storesGrid.innerHTML = '';
  const shuffled = [...stores].sort(() => 0.5 - Math.random());
  const selected = shuffled.slice(0, Math.floor(Math.random() * 5) + 6);
  selected.forEach(store => {
    const card = document.createElement('div');
    card.className = 'store-card';
    card.innerHTML = `
      <div class="store-header">
        <div class="category-icon-circle">${store.icon}</div>
        <div class="store-info">
          <div class="store-name">${store.name}</div>
          <div class="store-category">${store.category}</div>
        </div>
      </div>
      <div class="lovii-badge">
        <svg viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 12C7 12 2 9 2 5C2 3.34315 3.34315 2 5 2C5.75 2 6.5 2.25 7 2.75C7.5 2.25 8.25 2 9 2C10.6569 2 12 3.34315 12 5C12 9 7 12 7 12Z" fill="white"/>
          <path d="M5 5C4 6 5 8 6 8C7 8 8 6 7 5C6 4 5 5 5 5Z" fill="white"/>
          <path d="M9 5C10 6 9 8 8 8C7 8 6 6 7 5C8 4 9 5 9 5Z" fill="white"/>
        </svg>
        +${store.points} –±–∞–ª–ª–æ–≤ –∑–∞ –ø–æ–∫—É–ø–∫—É
      </div>
    `;
    card.addEventListener('click', () => console.log(`Store clicked: ${store.name}`));
    storesGrid.appendChild(card);
  });
}

// === –ù–ê–í–ò–ì–ê–¶–ò–Ø ===
function showScreen(screenId) {
  [mainScreen, authScreen, smsScreen, storesScreen, categoriesScreen, giftsScreen].forEach(s => s.classList.remove('active'));
  document.getElementById(screenId).classList.add('active');
  updateHeaderFooterVisibility();
}

function updateHeaderFooterVisibility() {
  const authenticated = !['#start', '#auth', '#sms', ''].includes(window.location.hash);
  footerNav.classList.toggle('show', authenticated);
  document.getElementById('header').classList.toggle('hidden', !authenticated);
  profileNavItem.classList.toggle('hidden', window.location.hash === '#start');
}

function handleHashChange() {
  const hash = window.location.hash.substring(1) || 'start';
  let screen = 'mainScreen';
  if (hash === 'auth') screen = 'authScreen';
  else if (hash === 'sms') screen = 'smsScreen';
  else if (hash === 'main') screen = 'storesScreen';
  else if (hash === 'categories') screen = 'categoriesScreen';
  else if (hash === 'gifts') screen = 'giftsScreen';
  showScreen(screen);
  if (hash === 'main') generateMainScreenCategories();
}

function navigateTo(hash) {
  window.location.hash = hash;
}

// === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–õ–ò–ö–û–í ===
catchColorsBtn?.addEventListener('click', () => navigateTo('auth'));
loginBtn?.addEventListener('click', () => navigateTo('sms'));
confirmBtn?.addEventListener('click', () => navigateTo('main'));
logoutItem?.addEventListener('click', () => {
  navigateTo('start');
  profileModal.style.display = 'none';
});

document.querySelectorAll('.nav-item[data-target]').forEach(item => {
  item.addEventListener('click', () => {
    const t = item.getAttribute('data-target');
    if (t === 'categoriesScreen') navigateTo('categories');
    else if (t === 'storesScreen' || t === 'mainScreen') navigateTo('main');
    else if (t === 'giftsScreen') navigateTo('gifts');
  });
});

document.querySelector('.nav-item.center')?.addEventListener('click', e => e.preventDefault());
document.getElementById('logoContainer')?.addEventListener('click', () => navigateTo('main'));

document.getElementById('notificationBtn')?.addEventListener('click', () => {
  const withDot = document.getElementById('bellIconWithDot');
  const without = document.getElementById('bellIconWithoutDot');
  [withDot.style.display, without.style.display] = [without.style.display, withDot.style.display];
});

// === –ü–†–û–§–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ ===
profileNavItem?.addEventListener('click', () => {
  profileModal.style.display = profileModal.style.display === 'block' ? 'none' : 'block';
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ
function handleClickOutside(e) {
  if (!modalContent.contains(e.target)) profileModal.style.display = 'none';
}
profileModal.addEventListener('mousedown', handleClickOutside);
profileModal.addEventListener('touchstart', handleClickOutside, { passive: true });

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—ã–±–æ—Ä—É –ø—É–Ω–∫—Ç–∞ (–∫—Ä–æ–º–µ —Ç–µ–º—ã)
document.querySelectorAll('#profileModal .modal-item').forEach(item => {
  item.addEventListener('click', () => {
    if (item.id !== 'themeToggleItem') profileModal.style.display = 'none';
  });
});

// === –¢–ï–ú–ò–ó–ê–¶–ò–Ø ===
if (themeToggleItem) {
  const saved = localStorage.getItem('lovii-theme');
  if (saved === 'dark') {
    document.documentElement.setAttribute('data-theme', 'dark');
    themeToggleItem.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
  }

  themeToggleItem.addEventListener('click', () => {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    if (isDark) {
      document.documentElement.removeAttribute('data-theme');
      localStorage.removeItem('lovii-theme');
      themeToggleItem.textContent = 'üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞';
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
      localStorage.setItem('lovii-theme', 'dark');
      themeToggleItem.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
    }
  });
}
// –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
document.getElementById('categorySearch').addEventListener('input', (e) => {
  const term = e.target.value.toLowerCase();
  document.querySelectorAll('.category-card').forEach(card => {
    const text = card.textContent.toLowerCase();
    card.style.display = text.includes(term) ? 'flex' : 'none';
  });
});
        
// === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
document.addEventListener('DOMContentLoaded', () => 
    {
  if (!window.location.hash) window.location.hash = 'start';
  generateCategoriesGrid();
  generateStoresGrid();
  handleHashChange();
  window.addEventListener('hashchange', handleHashChange);

  // === –ö–ê–†–£–°–ï–õ–¨ –° –ê–í–¢–û–í–û–ó–û–ë–ù–û–í–õ–ï–ù–ò–ï–ú ===
    const carousel = document.querySelector('.banner-carousel');
    const track = document.querySelector('.banner-track');
    const slides = document.querySelectorAll('.banner-card');
    let current = 0;
    let autoInterval;
    let resumeTimeout;
    
    const update = () => {
      track.style.transform = `translateX(-${current * 100}%)`;
    };
    
    const next = () => {
      current = (current + 1) % slides.length;
      update();
    };
    
    const startAuto = () => {
      clearInterval(autoInterval);
      clearTimeout(resumeTimeout);
      autoInterval = setInterval(next, 3000);
    };
    
    const pauseAndScheduleResume = () => {
      clearInterval(autoInterval);
      clearTimeout(resumeTimeout);
      resumeTimeout = setTimeout(startAuto, 5000); // –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ 5 —Å–µ–∫
    };
    
    // –ó–∞–ø—É—Å–∫
    startAuto();
    // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ç–∞–ø–µ/–∫–ª–∏–∫–µ
    carousel.addEventListener('touchstart', pauseAndScheduleResume, { passive: true });
    carousel.addEventListener('mousedown', pauseAndScheduleResume);
});

</script>
</body>
</html>
