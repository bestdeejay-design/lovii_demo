<h1 class="page-title">Еда и доставка</h1>

<div class="location-info" style="text-align: center; margin-bottom: 1.5rem; color: var(--text-secondary);">
  <p>Выберите город и тип заведения для поиска</p>
  <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 0.5rem;">
    <a href="/login-customer.html" class="btn-secondary">Войти как покупатель</a>
    <a href="/register-customer.html" class="btn-secondary">Регистрация покупателя</a>
  </div>
</div>

<div class="filters-container">
  <div class="filters">
    <select id="city">
      <option value="">Все города</option>
      <option value="spb">Санкт-Петербург</option>
      <option value="msk">Москва</option>
      <option value="ekb">Екатеринбург</option>
      <option value="nov">Новосибирск</option>
      <option value="kaz">Казань</option>
      <option value="nnv">Нижний Новгород</option>
      <option value="vor">Воронеж</option>
      <option value="sam">Самара</option>
    </select>
    
    <select id="establishment-type">
      <option value="">Все типы</option>
      <option value="restaurant">Рестораны</option>
      <option value="cafe">Кафе</option>
      <option value="canteen">Столовые</option>
      <option value="streetfood">Стритфуд</option>
      <option value="foodcourt">Фудкорты</option>
      <option value="homekitchen">Домашняя кухня</option>
      <option value="delivery">Доставка</option>
    </select>
    
    <select id="delivery-available">
      <option value="">Все</option>
      <option value="yes">С доставкой</option>
      <option value="no">Без доставки</option>
    </select>
    
    <button id="apply-filters" class="cta-button">Применить</button>
  </div>
  
  <div class="category-pills">
    <button class="pill-btn active" data-type="">Все</button>
    <button class="pill-btn" data-type="restaurant">Рестораны</button>
    <button class="pill-btn" data-type="cafe">Кафе</button>
    <button class="pill-btn" data-type="canteen">Столовые</button>
    <button class="pill-btn" data-type="streetfood">Стритфуд</button>
    <button class="pill-btn" data-type="foodcourt">Фудкорты</button>
    <button class="pill-btn" data-type="homekitchen">Домашняя кухня</button>

    <button class="pill-btn" data-type="delivery">Доставка</button>
  </div>
</div>

<div class="catalog-grid" id="catalogGrid">
  <!-- Сюда подгружаем карточки заведений -->
</div>

<script>
  // Demo establishments with various types and cities
  const demoEstablishments = [
    { id: 1, name: "Ресторан 'Берлога'", city: "msk", type: "restaurant", delivery: true, img: "https://images.unsplash.com/photo-1552566626-52f8b828add9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Традиционная русская кухня", rating: 4.7 },
    { id: 2, name: "Кафе 'Уголок'", city: "spb", type: "cafe", delivery: true, img: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Кофе и десерты", rating: 4.5 },
    { id: 3, name: "Столовая 'Содружество'", city: "ekb", type: "canteen", delivery: false, img: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Бизнес-ланчи", rating: 4.2 },
    { id: 4, name: "Стритфуд 'На колесах'", city: "nov", type: "streetfood", delivery: false, img: "https://images.unsplash.com/photo-1578926375602-e5f1b0b1c3d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Фастфуд на вынос", rating: 4.3 },
    { id: 5, name: "Фудкорт 'Вкусный двор'", city: "kaz", type: "foodcourt", delivery: true, img: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Много кухонь в одном месте", rating: 4.6 },
    { id: 6, name: "Домашняя кухня 'Бабушка Маша'", city: "nnv", type: "homekitchen", delivery: true, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Домашние пироги и борщи", rating: 4.8 },
    { id: 7, name: "McDonald's", city: "vor", type: "streetfood", delivery: true, img: "https://images.unsplash.com/photo-1603064752734-4c48eff53d05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Бургеры и картошка фри", rating: 4.1 },
    { id: 8, name: "Доставка продуктов 'Еда на дом'", city: "sam", type: "delivery", delivery: true, img: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Доставка продуктов и готовых блюд", rating: 4.4 },
    { id: 9, name: "Суши-бар 'Япончик'", city: "spb", type: "restaurant", delivery: true, img: "https://images.unsplash.com/photo-1578926375602-e5f1b0b1c3d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Суши и роллы", rating: 4.6 },
    { id: 10, name: "Кофейня 'Утро'", city: "msk", type: "cafe", delivery: true, img: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Кофе и свежая выпечка", rating: 4.5 },
    { id: 11, name: "Пиццерия 'Домашняя'", city: "ekb", type: "streetfood", delivery: true, img: "https://images.unsplash.com/photo-1513104890138-7c749659a591?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Традиционная итальянская пицца", rating: 4.7 },
    { id: 12, name: "Вегетарианское кафе 'Зелень'", city: "nov", type: "cafe", delivery: true, img: "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Вегетарианская кухня", rating: 4.6 },
    { id: 13, name: "Грузинский ресторан 'Тбилиси'", city: "kaz", type: "restaurant", delivery: true, img: "https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Хачапури и хинкали", rating: 4.8 },
    { id: 14, name: "Фастфуд 'Бургер-Мастер'", city: "nnv", type: "streetfood", delivery: true, img: "https://images.unsplash.com/photo-1603064752734-4c48eff53d05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Свежие бургеры", rating: 4.3 },
    { id: 15, name: "Домашняя кухня 'На Прачке'", city: "vor", type: "homekitchen", delivery: true, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Выпечка и сладости", rating: 4.7 },
    { id: 16, name: "Доставка 'Маркетплейс'", city: "sam", type: "delivery", delivery: true, img: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Доставка из супермаркетов", rating: 4.5 },
    { id: 17, name: "Кафе 'Садик'", city: "spb", type: "cafe", delivery: false, img: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Летнее кафе в парке", rating: 4.4 },
    { id: 18, name: "Ресторан 'Гастрономия'", city: "msk", type: "restaurant", delivery: true, img: "https://images.unsplash.com/photo-1552566626-52f8b828add9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Международная кухня", rating: 4.9 },
    { id: 19, name: "Столовая 'Университетская'", city: "ekb", type: "canteen", delivery: false, img: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Питание для студентов", rating: 4.0 },
    { id: 20, name: "Фудтрак 'Гурман'", city: "nov", type: "streetfood", delivery: false, img: "https://images.unsplash.com/photo-1578926375602-e5f1b0b1c3d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Европейская кухня на колесах", rating: 4.5 },
    { id: 21, name: "Фудкорт 'Мегаполис'", city: "kaz", type: "foodcourt", delivery: true, img: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Разные кухни мира", rating: 4.6 },
    { id: 22, name: "Кафе 'Бабушкины пирожки'", city: "nnv", type: "homekitchen", delivery: true, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Домашняя выпечка", rating: 4.8 },
    { id: 23, name: "KFC", city: "vor", type: "streetfood", delivery: true, img: "https://images.unsplash.com/photo-1603064752734-4c48eff53d05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Курица и снэки", rating: 4.2 },
    { id: 24, name: "Продуктовая доставка 'ВкусВилл'", city: "sam", type: "delivery", delivery: true, img: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", description: "Доставка из супермаркетов", rating: 4.5 }
  ];

  // Filter establishments based on selected criteria
  function filterEstablishments() {
    const city = document.getElementById('city').value;
    const type = document.getElementById('establishment-type').value;
    const deliveryAvailable = document.getElementById('delivery-available').value;
    
    const filtered = demoEstablishments.filter(est => {
      return (!city || est.city === city) && 
             (!type || est.type === type) && 
             (deliveryAvailable === '' || 
              (deliveryAvailable === 'yes' && est.delivery) || 
              (deliveryAvailable === 'no' && !est.delivery));
    });
    
    renderEstablishments(filtered);
  }

  // Render establishment cards
  function renderEstablishments(establishments) {
    const grid = document.getElementById('catalogGrid');
    grid.innerHTML = '';
    
    if (establishments.length === 0) {
      grid.innerHTML = '<p class="no-results">Не найдено заведений по заданным критериям</p>';
      return;
    }
    
    establishments.forEach(est => {
      const card = document.createElement('div');
      card.className = 'card establishment-card';
      card.innerHTML = `
        <img src="${est.img}" alt="${est.name}" onerror="this.src='/images/placeholder.jpg';">
        <div class="card-content">
          <h3>${est.name}</h3>
          <p class="establishment-description">${est.description}</p>
          <div class="establishment-meta">
            <span class="rating">★ ${est.rating}</span>
            <span class="type">${getTypeLabel(est.type)}</span>
          </div>
          <div class="establishment-actions">
            <button class="btn-primary">Перейти</button>
            <button class="btn-secondary">В избранное</button>
          </div>
        </div>
      `;
      grid.appendChild(card);
    });
  }

  // Get human-readable type label
  function getTypeLabel(type) {
    const labels = {
      'restaurant': 'Ресторан',
      'cafe': 'Кафе',
      'canteen': 'Столовая',
      'streetfood': 'Стритфуд',
      'foodcourt': 'Фудкорт',
      'homekitchen': 'Домашняя кухня',
      'delivery': 'Доставка'
    };
    return labels[type] || type;
  }

  // Add event listeners to filters
  document.getElementById('apply-filters').addEventListener('click', filterEstablishments);
  document.getElementById('city').addEventListener('change', filterEstablishments);
  document.getElementById('establishment-type').addEventListener('change', filterEstablishments);
  document.getElementById('delivery-available').addEventListener('change', filterEstablishments);

  // Add event listeners to category pills
  document.querySelectorAll('.category-pills .pill-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      // Remove active class from all buttons
      document.querySelectorAll('.category-pills .pill-btn').forEach(b => {
        b.classList.remove('active');
      });
      
      // Add active class to clicked button
      btn.classList.add('active');
      
      // Set type filter and trigger filtering
      document.getElementById('establishment-type').value = btn.getAttribute('data-type');
      filterEstablishments();
    });
  });

  // Initial render
  renderEstablishments(demoEstablishments);
</script>