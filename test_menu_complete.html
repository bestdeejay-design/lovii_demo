<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тестирование основного меню</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        main {
            padding: 120px 20px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <!-- Вставляем шаблон заголовка -->
    <header class="header">
        <div class="container">
            <!-- Логотип (слева) -->
            <a href="index.html" class="logo-link">
                <div class="logo">Витрина</div>
            </a>

            <!-- Основное меню (по центру, 4 пункта) -->
            <nav class="nav-menu main-menu">
                <ul class="main-menu-list">
                    <!-- Товары и услуги -->
                    <li class="nav-item has-submenu">
                        <a href="/products" class="nav-link">
                            Товары и услуги <i class="fas fa-chevron-down submenu-arrow"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="/catalog"><i class="fas fa-box"></i> Каталог товаров</a></li>
                            <li><a href="/services"><i class="fas fa-wrench"></i> Услуги</a></li>
                            <li><a href="/promotions"><i class="fas fa-gift"></i> Акции</a></li>
                        </ul>
                    </li>

                    <!-- Для бизнеса -->
                    <li class="nav-item has-submenu">
                        <a href="/business" class="nav-link">
                            Для бизнеса <i class="fas fa-chevron-down submenu-arrow"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="/suppliers"><i class="fas fa-truck"></i> Поставщикам</a></li>
                            <li><a href="/partners"><i class="fas fa-handshake"></i> Партнерам</a></li>
                            <li><a href="/corporate"><i class="fas fa-building"></i> Корпоративным клиентам</a></li>
                        </ul>
                    </li>

                    <!-- О проекте -->
                    <li class="nav-item has-submenu">
                        <a href="/about" class="nav-link">
                            О проекте <i class="fas fa-chevron-down submenu-arrow"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="/company"><i class="fas fa-info-circle"></i> О компании</a></li>
                            <li><a href="/contacts"><i class="fas fa-envelope"></i> Контакты</a></li>
                            <li><a href="/news"><i class="fas fa-newspaper"></i> Новости</a></li>
                        </ul>
                    </li>

                    <!-- Дополнительно -->
                    <li class="nav-item has-submenu">
                        <a href="/additional" class="nav-link">
                            Дополнительно <i class="fas fa-chevron-down submenu-arrow"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="/help"><i class="fas fa-question-circle"></i> Помощь</a></li>
                            <li><a href="/documents"><i class="fas fa-file-alt"></i> Документы</a></li>
                            <li><a href="/delivery"><i class="fas fa-shipping-fast"></i> Доставка</a></li>
                            <li><a href="/payment"><i class="fas fa-credit-card"></i> Оплата</a></li>
                        </ul>
                    </li>

                    <!-- Профиль -->
                    <li class="nav-item has-submenu">
                        <a href="/profile" class="nav-link">
                            Профиль <i class="fas fa-chevron-down submenu-arrow"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="/personal"><i class="fas fa-user"></i> Личный кабинет</a></li>
                            <li><a href="/orders"><i class="fas fa-list"></i> Мои заказы</a></li>
                            <li><a href="/favorites"><i class="fas fa-heart"></i> Избранное</a></li>
                            <li><a href="/settings"><i class="fas fa-cog"></i> Настройки</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <!-- Профиль и тема — справа -->
            <div class="header-actions">
                <nav class="profile-menu">
                    <ul>
                        <li class="nav-item has-submenu profile-dropdown">
                            <a href="#" class="nav-link profile-link">
                                <i class="fas fa-user"></i> Профиль
                                <i class="fas fa-chevron-down submenu-arrow"></i>
                            </a>
                            <ul class="submenu profile-submenu">
                                <li><a href="login.html"><i class="fas fa-sign-in-alt"></i> Войти</a></li>
                                <li><a href="wishlist.html"><i class="fas fa-heart"></i> Избранное <span class="item-count">5</span></a></li>
                                <li><a href="cart.html"><i class="fas fa-shopping-cart"></i> Корзина <span class="item-count">3</span></a></li>
                                <li><a href="compare.html"><i class="fas fa-exchange-alt"></i> Сравнить <span class="item-count">2</span></a></li>
                                <li><a href="recently-viewed.html"><i class="fas fa-eye"></i> Недавно просмотренные</a></li>
                                <li><a href="promotions.html"><i class="fas fa-gift"></i> Акции</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>

                <button id="theme-toggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <main>
        <div class="content">
            <h1>Тестирование основного меню</h1>
            <p>Эта страница создана для тестирования работы основного меню на десктопе и мобильном устройстве.</p>
            <p>Проверьте, что:</p>
            <ul>
                <li>Все пункты меню (Каталог, Услуги, О проекте, Дополнительно и Профиль) открываются по клику</li>
                <li>Подменю корректно открываются и закрываются</li>
                <li>При клике на другое меню предыдущее закрывается</li>
                <li>При клике вне меню все открытые подменю закрываются</li>
                <li>Меню корректно работает как на десктопе, так и на мобильных устройствах</li>
                <li>Ссылки без подменю должны вести на соответствующие страницы</li>
            </ul>
            <p><strong>Все функции меню теперь должны работать одинаково и корректно!</strong></p>
        </div>
    </main>

    <script src="js/main-menu.js"></script>
    <script src="js/routing_helper.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Initialize components after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize main menu
            if (typeof initializeMainMenu !== 'undefined') {
                initializeMainMenu();
            }
            
            // Initialize mobile menu
            if (typeof initializeMobileMenu !== 'undefined') {
                initializeMobileMenu();
            }
            
            // Initialize other components after templates load
            setTimeout(initializeAfterTemplatesLoad, 100);
            
            // Log for debugging
            console.log('Menu initialization completed');
            console.log('Found', document.querySelectorAll('.header .has-submenu > .nav-link').length, 'submenu items');
        });
    </script>
</body>
</html>