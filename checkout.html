<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Быстрое и безопасное оформление заказа на платформе Витрина. Выберите способ доставки и оплаты, подтвердите заказ.">
    <meta name="keywords" content="оформление заказа, доставка, оплата, корзина, безопасно">
    <meta name="author" content="Витрина - платформа для малого бизнеса">
    <title>Оформление заказа — быстро и безопасно на Витрине</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/main_menu_styles.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header will be loaded via JavaScript -->
    <div id="header-container"></div>

    <!-- Breadcrumbs -->
    <nav class="breadcrumbs">
        <div class="container">
            <div class="breadcrumb-nav">
                <ol>
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="cart.html">Корзина</a></li>
                    <li class="current">Оформление заказа</li>
                </ol>
            </div>
        </div>
    </nav>

    <!-- Checkout Section -->
    <section id="checkout" class="checkout-section">
        <div class="container">
            <div class="page-header">
                <h1>Оформление заказа</h1>
            </div>

            <div class="checkout-layout">
                <main class="checkout-main">
                    <!-- Step 1: Address -->
                    <div class="checkout-step">
                        <h2>1. Адрес доставки</h2>
                        <div class="address-options">
                            <div class="address-option">
                                <input type="radio" id="address-home" name="address" checked>
                                <label for="address-home">
                                    <div class="option-header">
                                        <i class="fas fa-home"></i>
                                        <span>Дом</span>
                                    </div>
                                    <div class="option-details">
                                        <p>ул. Примерная, д. 1, кв. 10</p>
                                        <p>Москва</p>
                                    </div>
                                </label>
                            </div>
                            <div class="address-option">
                                <input type="radio" id="address-work" name="address">
                                <label for="address-work">
                                    <div class="option-header">
                                        <i class="fas fa-building"></i>
                                        <span>Работа</span>
                                    </div>
                                    <div class="option-details">
                                        <p>ул. Бизнес-центр, д. 5, офис 201</p>
                                        <p>Москва</p>
                                    </div>
                                </label>
                            </div>
                            <div class="address-option">
                                <input type="radio" id="address-new" name="address">
                                <label for="address-new">
                                    <div class="option-header">
                                        <i class="fas fa-plus-circle"></i>
                                        <span>Добавить новый</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="address-form" id="newAddressForm" style="display: none;">
                            <div class="form-group">
                                <label for="street">Улица</label>
                                <input type="text" id="street" placeholder="Введите улицу">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="house">Дом</label>
                                    <input type="text" id="house" placeholder="Номер дома">
                                </div>
                                <div class="form-group">
                                    <label for="apartment">Квартира</label>
                                    <input type="text" id="apartment" placeholder="Номер квартиры">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Delivery method -->
                    <div class="checkout-step">
                        <h2>2. Способ получения</h2>
                        <div class="delivery-methods">
                            <div class="delivery-method">
                                <input type="radio" id="delivery-courier" name="delivery" checked>
                                <label for="delivery-courier">
                                    <div class="option-header">
                                        <i class="fas fa-shipping-fast"></i>
                                        <span>Доставка курьером</span>
                                    </div>
                                    <div class="option-details">
                                        <p>150 ₽</p>
                                        <p>Завтра, 12:00-15:00</p>
                                    </div>
                                </label>
                            </div>
                            <div class="delivery-method">
                                <input type="radio" id="delivery-pickup" name="delivery">
                                <label for="delivery-pickup">
                                    <div class="option-header">
                                        <i class="fas fa-store"></i>
                                        <span>Самовывоз</span>
                                    </div>
                                    <div class="option-details">
                                        <p>Бесплатно</p>
                                        <p>Пункт выдачи: ул. Примерная, д. 10</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Time -->
                    <div class="checkout-step">
                        <h2>3. Время доставки</h2>
                        <div class="date-picker">
                            <label>Выберите дату:</label>
                            <input type="date" id="delivery-date">
                        </div>
                        <div class="time-slots">
                            <label>Выберите интервал:</label>
                            <div class="time-options">
                                <div class="time-option">
                                    <input type="radio" id="time-9-12" name="time" checked>
                                    <label for="time-9-12">9:00 - 12:00</label>
                                </div>
                                <div class="time-option">
                                    <input type="radio" id="time-12-15" name="time">
                                    <label for="time-12-15">12:00 - 15:00</label>
                                </div>
                                <div class="time-option">
                                    <input type="radio" id="time-15-18" name="time">
                                    <label for="time-15-18">15:00 - 18:00</label>
                                </div>
                                <div class="time-option">
                                    <input type="radio" id="time-18-21" name="time">
                                    <label for="time-18-21">18:00 - 21:00</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Payment -->
                    <div class="checkout-step">
                        <h2>4. Способ оплаты</h2>
                        <div class="payment-methods">
                            <div class="payment-method">
                                <input type="radio" id="payment-card-online" name="payment" checked>
                                <label for="payment-card-online">
                                    <div class="option-header">
                                        <i class="fas fa-credit-card"></i>
                                        <span>Картой онлайн</span>
                                    </div>
                                </label>
                            </div>
                            <div class="payment-method">
                                <input type="radio" id="payment-cash" name="payment">
                                <label for="payment-cash">
                                    <div class="option-header">
                                        <i class="fas fa-money-bill-wave"></i>
                                        <span>При получении (наличные)</span>
                                    </div>
                                </label>
                            </div>
                            <div class="payment-method">
                                <input type="radio" id="payment-card" name="payment">
                                <label for="payment-card">
                                    <div class="option-header">
                                        <i class="fas fa-credit-card"></i>
                                        <span>При получении (карта)</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Order summary -->
                    <div class="checkout-step">
                        <h2>5. Подтверждение заказа</h2>
                        <div class="order-summary">
                            <div class="summary-header">
                                <h3>Заказ №23456</h3>
                                <span class="order-status">Ожидает оплаты</span>
                            </div>
                            <div class="summary-details">
                                <div class="summary-item">
                                    <span>Товары</span>
                                    <span>1 094 ₽</span>
                                </div>
                                <div class="summary-item">
                                    <span>Доставка</span>
                                    <span>150 ₽</span>
                                </div>
                                <div class="summary-item total">
                                    <span>Итого</span>
                                    <span>1 244 ₽</span>
                                </div>
                            </div>
                            <div class="order-info">
                                <p><strong>Адрес:</strong> ул. Примерная, д. 1, кв. 10, Москва</p>
                                <p><strong>Время:</strong> Завтра, 12:00-15:00</p>
                                <p><strong>Оплата:</strong> Картой онлайн</p>
                            </div>
                        </div>
                    </div>

                    <div class="checkout-actions">
                        <button class="btn btn-outline">Назад в корзину</button>
                        <button class="btn btn-primary btn-lg">Оплатить и подтвердить</button>
                    </div>
                </main>

                <aside class="checkout-summary">
                    <div class="summary-card">
                        <h3>Ваш заказ</h3>
                        <div class="order-items">
                            <div class="order-item">
                                <div class="item-image">
                                    <img src="images/product_image.jpg" alt="Молоко деревенское свежее">
                                </div>
                                <div class="item-info">
                                    <h4>Молоко деревенское свежее</h4>
                                    <p>2 × 149 ₽</p>
                                </div>
                                <div class="item-price">298 ₽</div>
                            </div>
                            <div class="order-item">
                                <div class="item-image">
                                    <img src="images/product_image.jpg" alt="Сыр домашний">
                                </div>
                                <div class="item-info">
                                    <h4>Сыр домашний из коровьего молока</h4>
                                    <p>1 × 499 ₽</p>
                                </div>
                                <div class="item-price">499 ₽</div>
                            </div>
                            <div class="order-item">
                                <div class="item-image">
                                    <img src="images/product_image.jpg" alt="Яйца куриные">
                                </div>
                                <div class="item-info">
                                    <h4>Яйца куриные высшей категории</h4>
                                    <p>3 × 99 ₽</p>
                                </div>
                                <div class="item-price">297 ₽</div>
                            </div>
                        </div>
                        <div class="summary-totals">
                            <div class="summary-item">
                                <span>Товары</span>
                                <span>1 094 ₽</span>
                            </div>
                            <div class="summary-item">
                                <span>Доставка</span>
                                <span>150 ₽</span>
                            </div>
                            <div class="summary-item total">
                                <span>Итого</span>
                                <span>1 244 ₽</span>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- Footer will be loaded via JavaScript -->
    <div id="footer-container"></div>

    <!-- Mobile Navigation -->
    <div id="mobile-nav-container"></div>

    <script src="js/main.js"></script>
    <script>
        // Load header, footer and mobile navigation templates
        document.addEventListener('DOMContentLoaded', function() {
            loadTemplate('templates/header.html', 'header-container');
            loadTemplate('templates/footer.html', 'footer-container');
            loadTemplate('templates/mobile-nav.html', 'mobile-nav-container');
        });

        function loadTemplate(url, elementId) {
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(elementId).innerHTML = data;
                    // Re-initialize any JavaScript functionality after template is loaded
                    if (elementId === 'mobile-nav-container') {
                        initializeNewMobileNavigation();
                    } else if (elementId === 'header-container') {
                        initializeMobileMenu();
                    }
                    
                    // After all templates are loaded, try initializing components again
                    setTimeout(initializeAfterTemplatesLoad, 50);
                })
                .catch(error => console.error('Error loading template:', error));
        }

        // Address form toggle
        document.addEventListener('DOMContentLoaded', function() {
            const newAddressRadio = document.getElementById('address-new');
            const newAddressForm = document.getElementById('newAddressForm');
            
            newAddressRadio.addEventListener('change', function() {
                if (this.checked) {
                    newAddressForm.style.display = 'block';
                } else {
                    newAddressForm.style.display = 'none';
                }
            });
            
            // Set min date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('delivery-date').value = today;
            document.getElementById('delivery-date').min = today;
        });
    </script>
</body>
</html>