<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Каталог товаров — Витрина</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <!-- SVG фон -->
  <svg class="svg-bg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
    <path d="M40,-40C55,-30,70,-15,72,0C74,15,63,30,50,40C37,50,20,55,5,52C-10,49,-25,43,-35,30C-45,17,-50,0,-45,-15C-40,-30,-25,-40,-10,-45C5,-50,20,-50,35,-45C50,-40,65,-30,55,-20C45,-10,30,-5,15,-5C0,-5,-15,-10,-25,-20C-35,-30,-40,-35,-30,-45C-20,-55,-10,-60,5,-60C20,-60,35,-55,40,-45Z" transform="translate(100,100)"/>
  </svg>

  <!-- Off-canvas elements -->
  <div class="overlay" id="overlay"></div>
  <div class="offcanvas-menu" id="offcanvasMenu">
    <button class="close-menu" id="closeMenu">×</button>
    <nav class="offcanvas-nav">
      <ul>
        <li><a href="/">Главная</a></li>
        <li class="dropdown">
          <a href="/catalog/">Каталог</a>
          <div class="dropdown-content">
            <a href="/catalog/categories">Товары по категориям</a>
            <a href="/catalog/new-arrivals">Новые поступления</a>
            <a href="/catalog/popular">Популярные товары</a>
            <a href="/catalog/sales">Акции и кэшбэк</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/food-delivery/">Еда и доставка</a>
          <div class="dropdown-content">
            <a href="/food-delivery/restaurants">Рестораны</a>
            <a href="/food-delivery/cafe">Кафе</a>
            <a href="/food-delivery/dark-kitchen">Dark Kitchen</a>
            <a href="/food-delivery/delivery">Доставка еды</a>
            <a href="/food-delivery/establishments-sales">Акции у заведений</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/business.html">Для бизнеса</a>
          <div class="dropdown-content">
            <a href="/business/connect-company">Подключить компанию</a>
            <a href="/business/support">Поддержка продавцов</a>
            <a href="/business/pro-tariffs">Тарифы PRO</a>
            <a href="/business/api">API и интеграции</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/buyers.html">Для покупателей</a>
          <div class="dropdown-content">
            <a href="/buyers/how-to-buy">Как делать покупки</a>
            <a href="/buyers/cashback">Кэшбэк и бонусы</a>
            <a href="/buyers/delivery-payment">Доставка и оплата</a>
            <a href="/buyers/faq">Частые вопросы</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/partners.html">Для партнёров</a>
          <div class="dropdown-content">
            <a href="/partners/banks">Банки и финансовые партнёры</a>
            <a href="/partners/integrators">Технические интеграторы</a>
            <a href="/partners/media">Медиа и коллаборации</a>
          </div>
        </li>
        <li><a href="/contacts.html">Контакты</a></li>
      </ul>
    </nav>
    <div class="offcanvas-theme">
      <div class="theme-toggle" id="mobileThemeToggle">
        <div class="toggle-knob"></div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header>
    <a href="/" class="logo"><span>Витрина</span></a>
    <nav class="desktop-nav">
      <ul>
        <li><a href="/">Главная</a></li>
        <li class="dropdown">
          <a href="/catalog/">Каталог</a>
          <div class="dropdown-content">
            <a href="/catalog/categories">Товары по категориям</a>
            <a href="/catalog/new-arrivals">Новые поступления</a>
            <a href="/catalog/popular">Популярные товары</a>
            <a href="/catalog/sales">Акции и кэшбэк</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/food-delivery/">Еда и доставка</a>
          <div class="dropdown-content">
            <a href="/food-delivery/restaurants">Рестораны</a>
            <a href="/food-delivery/cafe">Кафе</a>
            <a href="/food-delivery/dark-kitchen">Dark Kitchen</a>
            <a href="/food-delivery/delivery">Доставка еды</a>
            <a href="/food-delivery/establishments-sales">Акции у заведений</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/business.html">Для бизнеса</a>
          <div class="dropdown-content">
            <a href="/business/connect-company">Подключить компанию</a>
            <a href="/business/support">Поддержка продавцов</a>
            <a href="/business/pro-tariffs">Тарифы PRO</a>
            <a href="/business/api">API и интеграции</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/buyers.html">Для покупателей</a>
          <div class="dropdown-content">
            <a href="/buyers/how-to-buy">Как делать покупки</a>
            <a href="/buyers/cashback">Кэшбэк и бонусы</a>
            <a href="/buyers/delivery-payment">Доставка и оплата</a>
            <a href="/buyers/faq">Частые вопросы</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="/partners.html">Для партнёров</a>
          <div class="dropdown-content">
            <a href="/partners/banks">Банки и финансовые партнёры</a>
            <a href="/partners/integrators">Технические интеграторы</a>
            <a href="/partners/media">Медиа и коллаборации</a>
          </div>
        </li>
        <li><a href="/contacts.html">Контакты</a></li>
      </ul>
    </nav>
    <div class="theme-toggle" id="themeToggle">
      <div class="toggle-knob"></div>
    </div>
  </header>

  <!-- FAB Menu Button -->
  <button class="menu-fab" id="menuFab">≡</button>

  <main class="container">
    <h1 class="page-title">Товары от местных производителей</h1>
    
    <div class="location-info" style="text-align: center; margin-bottom: 1.5rem; color: var(--text-secondary);">
      <p>Показываем товары в Санкт-Петербурге</p>
      <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 0.5rem;">
        <a href="/login-customer.html" class="btn-secondary">Войти как покупатель</a>
        <a href="/register-customer.html" class="btn-secondary">Регистрация покупателя</a>
      </div>
    </div>
    
    <div class="filters-container">
      <div class="filters">
        <select id="category">
          <option value="">Все категории</option>
          <option value="ferm">Фермерские продукты</option>
          <option value="handmade">Ремесло</option>
          <option value="beauty">Косметика</option>
          <option value="drinks">Напитки</option>
          <option value="spices">Специи и приправы</option>
          <option value="textiles">Текстиль</option>
          <option value="bakery">Выпечка</option>
          <option value="honey">Мёд и пчелопродукты</option>
        </select>
        <select id="sort">
          <option value="seasonal">Сезонные</option>
          <option value="newest">Новинки</option>
          <option value="popular">Популярные</option>
          <option value="price-low">Цена: дешевые</option>
          <option value="price-high">Цена: дорогие</option>
        </select>
        <div class="price-filter">
          <span>Цена:</span>
          <input type="range" id="price-min" min="0" max="5000" value="0">
          <span id="min-value">0 ₽</span>
          <span>-</span>
          <input type="range" id="price-max" min="0" max="5000" value="5000">
          <span id="max-value">5000 ₽</span>
        </div>
        <button id="apply-filters" class="cta-button">Применить</button>
      </div>
      
      <div class="category-pills">
        <button class="pill-btn active" data-category="">Все</button>
        <button class="pill-btn" data-category="ferm">Фермерские</button>
        <button class="pill-btn" data-category="handmade">Ремесло</button>
        <button class="pill-btn" data-category="beauty">Косметика</button>
        <button class="pill-btn" data-category="drinks">Напитки</button>
        <button class="pill-btn" data-category="spices">Специи</button>
        <button class="pill-btn" data-category="textiles">Текстиль</button>
        <button class="pill-btn" data-category="bakery">Выпечка</button>
        <button class="pill-btn" data-category="honey">Мёд</button>
      </div>
    </div>

    <div class="catalog-grid" id="catalogGrid">
      <!-- Сюда подгружаем карточки -->
    </div>
    
    <script>
      // Extended demo products with more items and new categories
      const demoProducts = [
        { id: 1, name: "Сыр крафтовый 'Деревенский'", price: 450, img: "https://images.unsplash.com/photo-1603064752734-4c48eff53d05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Ферма 'Зелёный луг'", category: "ferm" },
        { id: 2, name: "Мыло ручной работы 'Лаванда'", price: 280, img: "https://images.unsplash.com/photo-1590491416154-3e55c2d8a224?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Мастерская 'Аромат природы'", category: "beauty" },
        { id: 3, name: "Мед дикий с лугов", price: 650, img: "https://images.unsplash.com/photo-1626814029240-89bde2a1fad7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пасека 'Солнечный бор'", category: "honey" },
        { id: 4, name: "Керамическая кружка 'Осенняя'", price: 750, img: "https://images.unsplash.com/photo-1597345270105-5a50de5277b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Студия гончара", category: "handmade" },
        { id: 5, name: "Чайный гриб 'Домашний'", price: 320, img: "https://images.unsplash.com/photo-1576045057995-568f588f82fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Ферментариум", category: "drinks" },
        { id: 6, name: "Смесь специй 'Северная'", price: 180, img: "https://images.unsplash.com/photo-1625938140774-7da26eaa1bae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Специи от бабушки", category: "spices" },
        { id: 7, name: "Свечи восковые 'Тёплый вечер'", price: 420, img: "https://images.unsplash.com/photo-1605236453806-6ff36851218e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Свеча-мастер", category: "handmade" },
        { id: 8, name: "Квас крафтовый 'Домашний'", price: 120, img: "https://images.unsplash.com/photo-1626492407605-0d8d4762d493?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пивоварня 'Северяночка'", category: "drinks" },
        { id: 9, name: "Сыр 'Крепыш' твёрдый", price: 580, img: "https://images.unsplash.com/photo-1585317609233-8c0b63270c6d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Ферма 'Зелёный луг'", category: "ferm" },
        { id: 10, name: "Крем для рук 'Малина'", price: 350, img: "https://images.unsplash.com/photo-1584442965411-1e41c07bdda2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Мастерская 'Аромат природы'", category: "beauty" },
        { id: 11, name: "Шапка вязаная 'Зимняя'", price: 890, img: "https://images.unsplash.com/photo-1591047101833-802a2b7ab4f6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Рукодельница Мария", category: "textiles" },
        { id: 12, name: "Клюквенный морс", price: 220, img: "https://images.unsplash.com/photo-1626492407605-0d8d4762d493?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Ферма 'Ягодный край'", category: "drinks" },
        { id: 13, name: "Оливковое масло 'Экстра'", price: 750, img: "https://images.unsplash.com/photo-1622240506921-042a4e3b9e7d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Оливковая ферма", category: "ferm" },
        { id: 14, name: "Масло ши натуральное", price: 520, img: "https://images.unsplash.com/photo-1598605272254-16f0f9daa6d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Косметика природы", category: "beauty" },
        { id: 15, name: "Сахарный песок ручной работы", price: 150, img: "https://images.unsplash.com/photo-1603532648955-a039f2e365cb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Ферма 'Сладкая жизнь'", category: "ferm" },
        { id: 16, name: "Ковер ручной работы 'Горный узор'", price: 2500, img: "https://images.unsplash.com/photo-1578926375602-e5f1b0b1c3d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Мастерская 'Традиции'", category: "handmade" },
        { id: 17, name: "Компот из яблок и груш", price: 180, img: "https://images.unsplash.com/photo-1603532648955-a039f2e365cb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Фруктовая лавка", category: "drinks" },
        { id: 18, name: "Смесь перцев 'Острых'", price: 220, img: "https://images.unsplash.com/photo-1625938140774-7da26eaa1bae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Специи от бабушки", category: "spices" },
        { id: 19, name: "Конопляное масло", price: 450, img: "https://images.unsplash.com/photo-1622240506921-042a4e3b9e7d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Эко-ферма", category: "ferm" },
        { id: 20, name: "Лосьон после бритья 'Хвойный'", price: 680, img: "https://images.unsplash.com/photo-1598605272254-16f0f9daa6d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Мужской уход", category: "beauty" },
        { id: 21, name: "Вязаный свитер 'Теплый'", price: 1500, img: "https://images.unsplash.com/photo-1591047101833-802a2b7ab4f6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Рукодельница Мария", category: "textiles" },
        { id: 22, name: "Смузи 'Тропик'", price: 280, img: "https://images.unsplash.com/photo-1626492407605-0d8d4762d493?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Смузи-бар", category: "drinks" },
        { id: 23, name: "Соль морская с травами", price: 180, img: "https://images.unsplash.com/photo-1625938140774-7da26eaa1bae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Специи от бабушки", category: "spices" },
        { id: 24, name: "Сыр 'Бри' с плесенью", price: 850, img: "https://images.unsplash.com/photo-1603064752734-4c48eff53d05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Ферма 'Зелёный луг'", category: "ferm" },
        { id: 25, name: "Хлеб ржаной 'Деревенский'", price: 120, img: "https://images.unsplash.com/photo-1605880132016-8e5c3a3a3a3a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пекарня 'Моя семья'", category: "bakery" },
        { id: 26, name: "Булочки сдобные 'Молочные'", price: 90, img: "https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пекарня 'Моя семья'", category: "bakery" },
        { id: 27, name: "Мёд липовый", price: 450, img: "https://images.unsplash.com/photo-1626814029240-89bde2a1fad7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пасека 'Солнечный бор'", category: "honey" },
        { id: 28, name: "Мёд цветочный", price: 420, img: "https://images.unsplash.com/photo-1626814029240-89bde2a1fad7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пасека 'Медовый край'", category: "honey" },
        { id: 29, name: "Шарф шерстяной 'Уют'", price: 650, img: "https://images.unsplash.com/photo-1591047101833-802a2b7ab4f6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Мастерская 'Тёплая вязка'", category: "textiles" },
        { id: 30, name: "Перчатки вязаные 'Мороз'", price: 450, img: "https://images.unsplash.com/photo-1591047101833-802a2b7ab4f6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Мастерская 'Тёплая вязка'", category: "textiles" },
        { id: 31, name: "Печенье овсяное 'Диетическое'", price: 220, img: "https://images.unsplash.com/photo-1605880132016-8e5c3a3a3a3a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пекарня 'Моя семья'", category: "bakery" },
        { id: 32, name: "Пирожки с картошкой", price: 45, img: "https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пекарня 'Моя семья'", category: "bakery" },
        { id: 33, name: "Мёд гречишный", price: 480, img: "https://images.unsplash.com/photo-1626814029240-89bde2a1fad7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пасека 'Медовый край'", category: "honey" },
        { id: 34, name: "Полотенце х/б 'Мягкое'", price: 350, img: "https://images.unsplash.com/photo-1578926375602-e5f1b0b1c3d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Текстильная мастерская", category: "textiles" },
        { id: 35, name: "Набор булочек 'Фруктовый'", price: 180, img: "https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пекарня 'Моя семья'", category: "bakery" },
        { id: 36, name: "Мёд майский цветочный", price: 520, img: "https://images.unsplash.com/photo-1626814029240-89bde2a1fad7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", vendor: "Пасека 'Солнечный бор'", category: "honey" }
      ];
      let allProducts = [...demoProducts];
      let currentPage = 1;
      const itemsPerPage = 16; // Increased from 12 to show more products

      // DOM Elements
      const categorySelect = document.getElementById('category');
      const sortSelect = document.getElementById('sort');
      const priceMinInput = document.getElementById('price-min');
      const priceMaxInput = document.getElementById('price-max');
      const minValueSpan = document.getElementById('min-value');
      const maxValueSpan = document.getElementById('max-value');
      const applyFiltersBtn = document.getElementById('apply-filters');
      const catalogGrid = document.getElementById('catalogGrid');
      const pillButtons = document.querySelectorAll('.pill-btn');

      // Initialize
      document.addEventListener('DOMContentLoaded', function() {
        updatePriceLabels();
        setupEventListeners();
        
        // Randomize initial display when page loads
        setTimeout(() => {
          applyFilters();
        }, 100);
      });

      // Setup event listeners
      function setupEventListeners() {
        // Price range inputs
        priceMinInput.addEventListener('input', updatePriceLabels);
        priceMaxInput.addEventListener('input', updatePriceLabels);
        
        // Filter button
        applyFiltersBtn.addEventListener('click', applyFilters);
        
        // Category select dropdown
        categorySelect.addEventListener('change', applyFilters);
        
        // Sort select dropdown
        sortSelect.addEventListener('change', applyFilters);
        
        // Category pill buttons
        pillButtons.forEach(button => {
          button.addEventListener('click', function() {
            // Update active pill
            pillButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            // Update category dropdown
            const category = this.getAttribute('data-category');
            categorySelect.value = category;
            
            applyFilters();
          });
        });
        
        // Infinite scroll
        window.addEventListener('scroll', handleInfiniteScroll);
      }

      // Update price labels
      function updatePriceLabels() {
        minValueSpan.textContent = priceMinInput.value + ' ₽';
        maxValueSpan.textContent = priceMaxInput.value + ' ₽';
      }

      // Apply filters and sorting
      function applyFilters() {
        const category = categorySelect.value;
        const sort = sortSelect.value;
        const minPrice = parseInt(priceMinInput.value);
        const maxPrice = parseInt(priceMaxInput.value);
        
        // Filter products
        let filtered = allProducts.filter(product => {
          const matchesCategory = !category || product.category === category;
          const matchesPrice = product.price >= minPrice && product.price <= maxPrice;
          return matchesCategory && matchesPrice;
        });
        
        // Sort products
        switch(sort) {
          case 'seasonal':
            filtered = getSeasonalProducts([...filtered]);
            break;
          case 'newest':
            filtered.sort((a, b) => b.id - a.id);
            break;
          case 'popular':
            // For demo purposes, we'll just randomize
            filtered = shuffleArray([...filtered]);
            break;
          case 'price-low':
            filtered.sort((a, b) => a.price - b.price);
            break;
          case 'price-high':
            filtered.sort((a, b) => b.price - a.price);
            break;
          default:
            filtered = shuffleArray([...filtered]);
        }
        
        filteredProducts = filtered;
        currentPage = 1;
        
        // Render first page
        renderCatalog(getCurrentPageItems());
        
        // Reset pagination controls
        updatePaginationControls();
      }

      // Get seasonal products based on current season
      function getSeasonalProducts(array) {
        const now = new Date();
        const month = now.getMonth(); // 0-11 (Jan-Dec)
        
        // Define seasonal categories
        const seasonalCategories = {
          winter: ['ferm', 'drinks', 'honey'], // winter: dairy, warm drinks, honey
          spring: ['spices', 'beauty', 'textiles'], // spring: spices, beauty care, textiles
          summer: ['drinks', 'ferm', 'honey'], // summer: fresh produce, cold drinks, honey
          autumn: ['ferm', 'spices', 'bakery'] // autumn: harvest products, spices, bakery
        };
        
        // Determine current season (Northern Hemisphere)
        let currentSeason;
        if (month >= 11 || month < 2) currentSeason = 'winter'; // Dec, Jan, Feb
        else if (month >= 2 && month < 5) currentSeason = 'spring'; // Mar, Apr, May
        else if (month >= 5 && month < 8) currentSeason = 'summer'; // Jun, Jul, Aug
        else currentSeason = 'autumn'; // Sep, Oct, Nov
        
        const seasonalCat = seasonalCategories[currentSeason];
        
        // Filter products by seasonal relevance
        const seasonalProducts = array.filter(product => 
          seasonalCat.includes(product.category)
        );
        
        // If we don't have enough seasonal products, mix in others
        if (seasonalProducts.length < 4) {
          return shuffleArray([...array]); // fallback to random if not enough seasonal
        }
        
        // Add some non-seasonal products to diversify
        const otherProducts = array.filter(product => 
          !seasonalCat.includes(product.category)
        ).slice(0, Math.min(5, array.length - seasonalProducts.length));
        
        const combined = [...seasonalProducts, ...otherProducts];
        return shuffleArray(combined);
      }

      // Shuffle array (Fisher-Yates algorithm)
      function shuffleArray(array) {
        const newArray = [...array];
        for (let i = newArray.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
      }

      // Get current page items
      function getCurrentPageItems() {
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        return filteredProducts.slice(startIndex, endIndex);
      }

      // Render products
      function renderCatalog(products) {
        const grid = document.getElementById('catalogGrid');
        grid.innerHTML = products.map((p, index) => `
          <div class="product-card" style="animation-delay: ${index * 0.1}s;">
            <img src="${p.img}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p class="vendor">${p.vendor}</p>
            <div class="price">${p.price} ₽</div>
            <a href="/product.html?id=${p.id}" class="cta-button" style="width: 100%; margin-top: 0.75rem; display: block; text-align: center; text-decoration: none;">Подробнее</a>
          </div>
        `).join('');
      }

      // Load more products
      function loadMoreProducts() {
        currentPage++;
        const newProducts = getCurrentPageItems();
        
        if (newProducts.length > 0) {
          const grid = document.getElementById('catalogGrid');
          
          // Append new products instead of replacing
          const newProductHTML = newProducts.map((p, index) => `
            <div class="product-card" style="animation-delay: ${(grid.children.length + index) * 0.1}s;">
              <img src="${p.img}" alt="${p.name}">
              <h3>${p.name}</h3>
              <p class="vendor">${p.vendor}</p>
              <div class="price">${p.price} ₽</div>
              <a href="/product.html?id=${p.id}" class="cta-button" style="width: 100%; margin-top: 0.75rem; display: block; text-align: center; text-decoration: none;">Подробнее</a>
            </div>
          `).join('');
          
          grid.insertAdjacentHTML('beforeend', newProductHTML);
        }
        
        updatePaginationControls();
      }

      // Handle infinite scroll
      function handleInfiniteScroll() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const threshold = 100; // pixels from bottom
        
        if (scrollTop + windowHeight >= documentHeight - threshold) {
          // Check if we still have more products to load
          const totalLoaded = currentPage * itemsPerPage;
          if (totalLoaded < filteredProducts.length) {
            loadMoreProducts();
          }
        }
      }

      // Update pagination controls
      function updatePaginationControls() {
        // Removed button visibility control - only infinite scroll is used
        const totalLoaded = currentPage * itemsPerPage;
        const hasMore = totalLoaded < filteredProducts.length;
      }
    </script>
    
    <div class="pagination" style="text-align: center; margin-top: 2rem;">
      <button id="load-more" class="cta-button" style="display:none;">Загрузить ещё</button>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <a href="/" class="logo"><span>Витрина</span></a>
      <div class="footer-links desktop-links">
        <a href="/buyers.html">Для покупателей</a>
        <a href="/partners.html">Для партнёров</a>
        <a href="/business.html">Для бизнеса</a>
        <a href="/contacts.html">Контакты</a>
        <a href="/terms.html">Условия</a>
        <a href="/privacy.html">Конфиденциальность</a>
        <a href="/help.html">Помощь</a>
      </div>
      <div class="footer-mobile-menu">
        <details class="mobile-dropdown">
          <summary>Разделы</summary>
          <div class="mobile-links">
            <a href="/buyers.html">Для покупателей</a>
            <a href="/partners.html">Для партнёров</a>
            <a href="/business.html">Для бизнеса</a>
            <a href="/contacts.html">Контакты</a>
            <a href="/terms.html">Условия</a>
            <a href="/privacy.html">Конфиденциальность</a>
            <a href="/help.html">Помощь</a>
          </div>
        </details>
      </div>
    </div>
  </footer>

  <script src="/js/main.js"></script>
  
</body>
</html>